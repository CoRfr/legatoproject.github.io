<div class="header">
<div class="headertitle">
<h1 class="title">Sample code for Neighboring Cells Information </h1> </div>
</div><meta content="Sample code for Neighboring Cells Information " name="title"></meta><div class="contents">
<div class="textblock"><div class="fragment"><div class="line"><span class="comment">//--------------------------------------------------------------------------------------------------</span></div><div class="line"><span class="comment"></span><span class="comment">//--------------------------------------------------------------------------------------------------</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> Testle_mrc_GetNeighboringCellsInfo()</div><div class="line">{</div><div class="line"> <a class="code" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> res;</div><div class="line"> <a class="code" href="le__mrc__interface_8h.html#a672ea94ad892bb95f43836b5fbd24188">le_mrc_NeighborCellsRef_t</a> ngbrRef;</div><div class="line"> <a class="code" href="le__mrc__interface_8h.html#a8fbb2523c254ba473a3f59efa452355e">le_mrc_CellInfoRef_t</a> cellRef;</div><div class="line">    uint32_t i = 0;</div><div class="line">    uint32_t cid = 0;</div><div class="line">    uint32_t lac = 0;</div><div class="line">    int32_t rxLevel = 0;</div><div class="line"> <a class="code" href="le__mrc__interface_8h.html#aaf23906c37ad59fb96a8a48f7fab5b43">le_mrc_Rat_t</a> rat = 0;</div><div class="line">    int32_t ecio = 0;</div><div class="line">    int32_t intraRsrp = 0;</div><div class="line">    int32_t intraRsrq = 0;</div><div class="line">    int32_t interRsrp = 0;</div><div class="line">    int32_t interRsrq = 0;</div><div class="line"></div><div class="line"> <a class="code" href="le__log_8h.html#a4ebab29f40ee8eaaa87205fe3f9aaa13">LE_INFO</a>(<span class="stringliteral">"Start Testle_mrc_GetNeighborCellsInfo"</span>);</div><div class="line"></div><div class="line">    ngbrRef = <a class="code" href="le__mrc__interface_8h.html#a8d44fe46e61f3399c5e0dd6002b042ae">le_mrc_GetNeighborCellsInfo</a>();</div><div class="line"> <a class="code" href="le__log_8h.html#ac0dbbef91dc0fed449d0092ff0557b39">LE_ASSERT</a>(ngbrRef);</div><div class="line"></div><div class="line"> <span class="keywordflow">if</span> (ngbrRef)</div><div class="line">    {</div><div class="line">        i = 0;</div><div class="line"></div><div class="line">        cellRef = <a class="code" href="le__mrc__interface_8h.html#ab50724fd74818d71da1dfcd2217dd795">le_mrc_GetFirstNeighborCellInfo</a>(ngbrRef);</div><div class="line"> <a class="code" href="le__log_8h.html#ac0dbbef91dc0fed449d0092ff0557b39">LE_ASSERT</a>(cellRef);</div><div class="line">        cid = <a class="code" href="le__mrc__interface_8h.html#abdbc94e474235417d8610e2eb95558eb">le_mrc_GetNeighborCellId</a>(cellRef);</div><div class="line">        lac = <a class="code" href="le__mrc__interface_8h.html#a70ba0ca70367bc673a6bca1e246bb88f">le_mrc_GetNeighborCellLocAreaCode</a>(cellRef);</div><div class="line">        rxLevel = <a class="code" href="le__mrc__interface_8h.html#aeae116235802afd041afd9df009642aa">le_mrc_GetNeighborCellRxLevel</a>(cellRef);</div><div class="line">        rat = <a class="code" href="le__mrc__interface_8h.html#a5bb3e75b74260a9cee57247e1968a31f">le_mrc_GetNeighborCellRat</a>(cellRef);</div><div class="line"> <a class="code" href="le__log_8h.html#a4ebab29f40ee8eaaa87205fe3f9aaa13">LE_INFO</a>(<span class="stringliteral">"Cell #%d, cid.%d, lac.%d, rxLevel.%ddBm, RAT.%d"</span>, i, cid, lac, rxLevel, rat);</div><div class="line"> <span class="comment">// Specific values for UMTS and LTE</span></div><div class="line"> <span class="keywordflow">switch</span>(rat)</div><div class="line">        {</div><div class="line"> <span class="keywordflow">case</span> <a class="code" href="le__mrc__interface_8h.html#aaf23906c37ad59fb96a8a48f7fab5b43afe34c4f3a53aa717f5ecb94dd59bf728">LE_MRC_RAT_UMTS</a>:</div><div class="line">                ecio = <a class="code" href="le__mrc__interface_8h.html#a94e452e3d7063d3359dcbb97a31b984b">le_mrc_GetNeighborCellUmtsEcIo</a>(cellRef);</div><div class="line"> <a class="code" href="le__log_8h.html#a4ebab29f40ee8eaaa87205fe3f9aaa13">LE_INFO</a>(<span class="stringliteral">"Cell #%d, UMTS EcIo.%010.1fdB"</span>, i, ((<span class="keywordtype">double</span>)ecio/10));</div><div class="line"> <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line"> <span class="keywordflow">case</span> <a class="code" href="le__mrc__interface_8h.html#aaf23906c37ad59fb96a8a48f7fab5b43aaf2b25a8ec75f9bacb51967f23247176">LE_MRC_RAT_LTE</a>:</div><div class="line">                res = <a class="code" href="le__mrc__interface_8h.html#a7754836120c34cd2610b9777bd56409f">le_mrc_GetNeighborCellLteIntraFreq</a>(cellRef, &amp;intraRsrq, &amp;intraRsrp);</div><div class="line"> <a class="code" href="le__log_8h.html#ac0dbbef91dc0fed449d0092ff0557b39">LE_ASSERT</a>(res == LE_OK);</div><div class="line">                res = <a class="code" href="le__mrc__interface_8h.html#a331545d4e396c513bba028db981c016b">le_mrc_GetNeighborCellLteInterFreq</a>(cellRef, &amp;interRsrq, &amp;interRsrp);</div><div class="line"> <a class="code" href="le__log_8h.html#ac0dbbef91dc0fed449d0092ff0557b39">LE_ASSERT</a>(res == LE_OK);</div><div class="line"></div><div class="line"> <a class="code" href="le__log_8h.html#a4ebab29f40ee8eaaa87205fe3f9aaa13">LE_INFO</a>(<span class="stringliteral">"Cell #%d, LTE Intra-RSRQ.%010.1fdB, Intra-RSRP.%010.1fdBm, "</span></div><div class="line"> <span class="stringliteral">"Inter-RSRQ.%010.1fdB, Inter-RSRP.%010.1fdBm"</span>,</div><div class="line">                        i, ((<span class="keywordtype">double</span>)intraRsrq/10), ((<span class="keywordtype">double</span>)intraRsrp/10),</div><div class="line">                        ((<span class="keywordtype">double</span>)interRsrq/10), ((<span class="keywordtype">double</span>)interRsrp/10));</div><div class="line"> <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line"> <span class="keywordflow">default</span>:</div><div class="line"> <a class="code" href="le__log_8h.html#a4ebab29f40ee8eaaa87205fe3f9aaa13">LE_INFO</a>(<span class="stringliteral">"Nothing more to display"</span>);</div><div class="line"> <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line"> <span class="keywordflow">while</span> ((cellRef = <a class="code" href="le__mrc__interface_8h.html#a0baede61d9b260a3ec83e3ab320d0715">le_mrc_GetNextNeighborCellInfo</a>(ngbrRef)) != NULL)</div><div class="line">        {</div><div class="line">            i++;</div><div class="line">            cid = <a class="code" href="le__mrc__interface_8h.html#abdbc94e474235417d8610e2eb95558eb">le_mrc_GetNeighborCellId</a>(cellRef);</div><div class="line">            lac = <a class="code" href="le__mrc__interface_8h.html#a70ba0ca70367bc673a6bca1e246bb88f">le_mrc_GetNeighborCellLocAreaCode</a>(cellRef);</div><div class="line">            rxLevel = <a class="code" href="le__mrc__interface_8h.html#aeae116235802afd041afd9df009642aa">le_mrc_GetNeighborCellRxLevel</a>(cellRef);</div><div class="line">            rat = <a class="code" href="le__mrc__interface_8h.html#a5bb3e75b74260a9cee57247e1968a31f">le_mrc_GetNeighborCellRat</a>(cellRef);</div><div class="line"> <a class="code" href="le__log_8h.html#a4ebab29f40ee8eaaa87205fe3f9aaa13">LE_INFO</a>(<span class="stringliteral">"Cell #%d, cid.%d, lac.%d, rxLevel.%ddBm, RAT.%d"</span>, i, cid, lac, rxLevel, rat);</div><div class="line"> <span class="comment">// Specific values for UMTS and LTE</span></div><div class="line"> <span class="keywordflow">switch</span>(rat)</div><div class="line">            {</div><div class="line"> <span class="keywordflow">case</span> <a class="code" href="le__mrc__interface_8h.html#aaf23906c37ad59fb96a8a48f7fab5b43afe34c4f3a53aa717f5ecb94dd59bf728">LE_MRC_RAT_UMTS</a>:</div><div class="line">                    ecio = <a class="code" href="le__mrc__interface_8h.html#a94e452e3d7063d3359dcbb97a31b984b">le_mrc_GetNeighborCellUmtsEcIo</a>(cellRef);</div><div class="line"> <a class="code" href="le__log_8h.html#a4ebab29f40ee8eaaa87205fe3f9aaa13">LE_INFO</a>(<span class="stringliteral">"Cell #%d, UMTS EcIo.%010.1fdB"</span>, i, ((<span class="keywordtype">double</span>)ecio/10));</div><div class="line"> <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line"> <span class="keywordflow">case</span> <a class="code" href="le__mrc__interface_8h.html#aaf23906c37ad59fb96a8a48f7fab5b43aaf2b25a8ec75f9bacb51967f23247176">LE_MRC_RAT_LTE</a>:</div><div class="line">                    res = <a class="code" href="le__mrc__interface_8h.html#a7754836120c34cd2610b9777bd56409f">le_mrc_GetNeighborCellLteIntraFreq</a>(cellRef, &amp;intraRsrq, &amp;intraRsrp);</div><div class="line"> <a class="code" href="le__log_8h.html#ac0dbbef91dc0fed449d0092ff0557b39">LE_ASSERT</a>(res == LE_OK);</div><div class="line">                    res = <a class="code" href="le__mrc__interface_8h.html#a331545d4e396c513bba028db981c016b">le_mrc_GetNeighborCellLteInterFreq</a>(cellRef, &amp;interRsrq, &amp;interRsrp);</div><div class="line"> <a class="code" href="le__log_8h.html#ac0dbbef91dc0fed449d0092ff0557b39">LE_ASSERT</a>(res == LE_OK);</div><div class="line"></div><div class="line"> <a class="code" href="le__log_8h.html#a4ebab29f40ee8eaaa87205fe3f9aaa13">LE_INFO</a>(<span class="stringliteral">"Cell #%d, LTE Intra-RSRQ.%010.1fdB, Intra-RSRP.%010.1fdBm, "</span></div><div class="line"> <span class="stringliteral">"Inter-RSRQ.%010.1fdB, Inter-RSRP.%010.1fdBm"</span>,</div><div class="line">                            i, ((<span class="keywordtype">double</span>)intraRsrq/10), ((<span class="keywordtype">double</span>)intraRsrp/10),</div><div class="line">                            ((<span class="keywordtype">double</span>)interRsrq/10), ((<span class="keywordtype">double</span>)interRsrp/10));</div><div class="line"> <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line"> <span class="keywordflow">default</span>:</div><div class="line"> <a class="code" href="le__log_8h.html#a4ebab29f40ee8eaaa87205fe3f9aaa13">LE_INFO</a>(<span class="stringliteral">"Nothing more to display"</span>);</div><div class="line"> <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line"> <a class="code" href="le__mrc__interface_8h.html#a101343359e8d36ab41180aede2891b07">le_mrc_DeleteNeighborCellsInfo</a>(ngbrRef);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --></div></div>