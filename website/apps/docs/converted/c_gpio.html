<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Legato - Build Apps - Documentation</title>
	<meta name="description" content="legato™ is an open source Linux-based embedded platform designed to simplify connected IoT application development" />
	<meta name="keywords" content="#keywords" />
	<meta name="robots" content="noindex, nofollow" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" href="/resources/images/legato.ico">
    <link rel="apple-touch-icon" href="#">
    <link rel="apple-touch-icon" sizes="72x72" href="#">
    <link rel="apple-touch-icon" sizes="114x114" href="#">
    <link rel="stylesheet" type="text/css" href="/resources/css/style.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/resources/css/font-awesome.css">
    
    <!--[if IE]>
    <script src="/resources/js/html5shiv.js"></script>
    <script src="/resources/js/respond.js"></script>
    <![endif]-->
    
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

    <script src="/resources/js/main.js"></script>    
    <link rel="stylesheet" type="text/css" href="/resources/css/jqtree.css">
    <script type="text/javascript" src="/resources/js/tree.jquery.js"></script>
    <script>
    setupTree();
    </script>
</head>
<body>
    <div class="wrapper">
    	<div id="menu-trigger" class="fa fa-bars documentation"></div>
        <div id="top">
            <header>
                <nav>
                    <a href="/index.html"class="navlink">Introduction</a><a href="/partners/"class="navlink">Partners</a><a href="/apps/"class="navlink">Build Apps</a><a href="/apps/intro"class="subnavlink">Introduction</a><a href="/apps/getstarted"class="subnavlink">Get started</a><a href="/apps/docs/learn"class="subnavlink">Documentation</a><a href="/apps/community"class="subnavlink">Community</a><a href="/apps/license"class="subnavlink">License</a><a href="/platform/"class="navlink">Build Platform</a><a href="/platform/"class="subnavlink">Introduction</a><a href="/platform/"class="subnavlink">Get started</a><a href="/platform/docs"class="subnavlink">Documentation</a><a href="/platform/"class="subnavlink">Community</a><a href="/platform/"class="subnavlink">License</a>
                </nav>
            </header>
        </div>
        <div id="menudocumentation">
	<header>
		<h1><a title="back to Legato homepage" href="/" class="navlink">Legato</a></h1>
		<h2>/ Build Apps Documentation</h2>
		<nav>
			<a href="/apps/docs/learn/">Learn</a><a href="/apps/docs/api/">API Guides</a><a href="/apps/docs/tools/">Tools</a><a href="/apps/docs/reference/">Reference</a>
			<i class="fa fa-search"></i>
			<input id="autocomplete" onkeyup="getdata()"> <!-- <input id="category" type="checkbox" onclick="checkbox()"> <label for="category">API Search</label> -->
		<ul id="search_result" class="ui-autocomplete ui-front ui-menu ui-widget ui-widget-content" tabindex="0"></ul>
	</nav>
</header>
</div>

        <div id="topMenu">
	<a href=/apps/docs/converted/ class="biglink">App docs?</a>
	<nav>
	<a href="/apps/docs/converted/" class="link-selected">Converted documentation</a><a href="sample-apps.html">Sample Apps</a><a href="how-tos.html">How Tos</a><a href="def-files.html">Definition Files</a>
	</nav>
</div>
        <div id="left">
        	<div id="tree1">Loading nav tree...</div>
        </div>

        <div class="content">
            <div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark"> </span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark"> </span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark"> </span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark"> </span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark"> </span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark"> </span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark"> </span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark"> </span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark"> </span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark"> </span>Pages</a></div>
<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>
<div class="header">
<div class="headertitle">
<div class="title">GPIO </div> </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="le__gpio__interface_8h.html">API Reference</a> <br />
<a class="el" href="sample_apps_gpio_cf3.html">GPIO sample app</a></p>
<hr />
<p>This API is used by apps to control general-purpose digital input/output pins.</p>
<p>A GPIO pin typically has one or more of the following features:</p>
<ul>
<li>configured as an input pin or an output pin.</li>
<li>have an internal pull-up resistor or pull-down resistor enabled, or neither.</li>
<li>if an output, can be push-pull or open-drain.</li>
<li>if an input, can trigger an <em>interrupt</em> (asynchronous notification of state change).</li>
</ul>
<p>Output pins can be driven in three modes:</p>
<ul>
<li><b>push-pull</b> one transistor connects to the supply and another transistor connects to ground (only one is operated at a time)</li>
<li><b>tri-state</b> same as push-pull with an added high-impedance (high Z) state to disconnect pin from both ground and supply.</li>
<li><b>open drain</b> transistor connects only to ground. Can only be used to pull low.</li>
</ul>
<p>Pins also have a <em>polarity</em> mode:</p>
<ul>
<li><b> active-high </b> polarity pin is read/written as a digital 1 (true) when its voltage is "high" and 0 (false) when its voltage is "low" (grounded).</li>
<li><b> active-low </b> pin is read/written as a digital 1 (true) when its voltage is "low" (grounded) and 0 (false) when its voltage is "high".</li>
</ul>
<p>The following functions are used to configure the GPIO pin:</p>
<ul>
<li>SetInput() - Configure as an input pin.</li>
<li>SetPushPullOutput() - Configure as push-pull output pin (can drive high or low).</li>
<li>SetTriStateOutput() - Configure as tri-state output pin (can drive high or low or neither).</li>
<li>SetOpenDrainOutput() - Configure as open-drain output pin (only pulls low).</li>
<li>EnablePullUp() - Enables the internal pull-up resistor (and disables the pull-down).</li>
<li>EnablePullDown() - Enables the internal pull-down resistor (and disables the pull-up).</li>
<li>DisableResistors() - Disables the internal pull-up/down resistors.</li>
<li>SetEdgeSense() - Set the edge sensing on an input pin (only works if you have an EventHandler)</li>
</ul>
<p>To set the level of an output pin, call Activate(), Deactivate(), or SetHighZ().</p>
<p>To poll the value of an input pin, call Read().</p>
<p>Use the ChangeEvent to register a notification callback function to be called when the state of an input pin changes. Thje type of edge detection can then be modified by calling SetEdgeSense() or DisbleEdgeSense() </p>
<dl class="section note"><dt>Note</dt><dd>Only one handler can be registered per pin. Subsequent attempts to register a handler will result in the client being killed.</dd></dl>
<p>The following functions can be used to read the current setting for a GPIO Pin. In a Linux environment these values are read from the sysfs and reflect the actual value at the time the function is called.</p>
<ul>
<li>IsOutput() - Is the pin currently an output?</li>
<li>IsInput() - Is the pin currently an input?</li>
<li>IsActive() - Is an output pin currently being driven? (corresponds to the value file in sysfs)</li>
<li>GetPolarity() - Retrieve the current polarity i.e. active-low or active-high</li>
<li>GetEdgeSense() - What edge sensing has been enabled on an input pin?</li>
<li>GetPullUpDown() - What pull-up or pull-down has been enabled?</li>
</ul>
<p>Each GPIO pin is accessed through a single IPC service. This makes it possible to use bindings to control which GPIO pins each app is allowed to access. It also simplifies the API by removing the need to specify which pin is desired and allows the pins to be named differently in the client and the server, so the client can be more portable. Only one client can connect to pin.</p>
<p>Binding example:</p>
<pre class="fragment">bindings:
{
    ui.frontPanel.powerLed -> gpioService.le_gpio22
}
</pre><h1><a class="anchor" id="gpioConfig"></a>
Configuring available GPIOs</h1>
<p>The GPIOs which are available for use are advertised in the sysfs at </p>
<pre class="fragment">/sys/class/gpio/gpiochip1/mask </pre><p> For each entry in this bitmask, a service will be advertised to allow use of the pin. However, if a pin needs to be disabled form being accessed, e.g. it carries out some system function that should not be available to apps, then it can be disabled by adding an entry to the config tree.</p>
<p>For example, to disable pin 6 from being used, add the entry </p>
<pre class="fragment">gpioService:/pins/disabled/n </pre><p> where n is the GPIO number. The value should be set to true to disable that service. If the value is either false or absent then the service will run. Entries can be added using the config tool, for example </p>
<pre class="fragment">config set gpioService:/pins/disabled/13 true bool</pre><p> will disable the service for pin 13. Note that specifying the type as bool is vital as the config tool defaults to the string type, and hence any value set will default to false. </p>
<hr />
<p>Copyright (C) Sierra Wireless Inc. Use of this work is subject to license. </p>
</div></div><!-- contents -->
<meta content="API Guides" name="category"></meta></div>
            <br clear="left" />
        </div>
        <div id="footer">
        	Copyright © Sierra Wireless Inc. Use of this work is subject to license.
        </div>
	</div>
</body>
</html>